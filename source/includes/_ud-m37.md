# 副露与暗杠 `M37`

下文中「副露与暗杠」统称为*bark*。

## 获取 bark 类型

`local <type> = <m>:type()`

参数 | 类型 | 描述
---- | ---- | ----
`<m>` | userdata `M37` | 一个`M37`对象

返回值 | 类型 | 描述
------ | ---- | ----
`<type>` | string | bark 的类型

返回值为 `"chii"`, `"pon"`, `"daiminkan"`,`"ankan"`, `"kakan"`中的一个。

## 获取 bark 中的一张牌

`local <t> = <m>[<index>]`

参数 | 类型 | 描述
---- | ---- | ----
`<m>` | userdata `M37` | 一个`M37`对象
`<index>` | number | 下标

返回值 | 类型 | 描述
------ | ---- | ----
`<type>` | userdata `T37` | 麻将牌

通过下标获取 meld 中的一张牌。
对于吃、碰，下标的范围是 1～3；
对于杠，下标范围是 1～4。

下标的意义定义如下：

- 吃的下标顺序是数牌的数值顺序
- 碰的下标顺序是实际摆放的顺序
- 大明杠的情况需参考部分网麻中的类似加杠的浓缩式摆放，
  其中前三张下标顺序同碰，代表下层实际摆放顺序，
  而第四张牌则必定是手中原有的牌
- 暗杠的下标顺序为「赤牌在前」
- 加杠的前三张牌顺序同碰，第四张牌为加杠牌

对于碰与明杠而言，下标顺序唯一的意义在于区分赤牌的来源。

## 检查某张牌的存在

`local <ok> = <m>:has(<t>)`

参数 | 类型 | 描述
---- | ---- | ----
`<m>` | userdata `M37` | 一个`M37`对象
`<t>` | userdata `T34` | 一个`M34`对象

返回值 | 类型 | 描述
------ | ---- | ----
`<ok>` | boolean | `<m>`中是否含有`<t>`

