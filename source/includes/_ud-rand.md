# 随机数生成器 `Rand`

## 生成整数

> 例：生成一个 0 ~ 9 的随机数，保存到全局变量`doge`

```lua
doge = 0

function ondice()
  doge = rand:gen(10)
end
```

`local <n> = <rand>:gen(<limit>)`

参数 | 类型 | 描述
---- | ---- | ----
`<rand>` | userdata `Rand` | 随机数生成器
`<limit>` | number | 上限，大于 0 的整数

返回值 | 类型 | 描述
------ | ---- | ----
`<n>` | number | 一个大于等于 0，小于`<limit>`的整数

目前随机数只能在`ondice`中生成，
这是因为松饼中随机数的使用是受管制的。
这主要是为了方便所有预知类的能力的实现（不仅仅是怜的未来视）。

牌局可以预知的前提，是技能具有「可重入」的性质。
所谓可重入，是指输入一样时输出必然一样。
如果（真）随机数可以在任何时间点产生，
使用了这些随机数的技能会变得不可重入。
一个不方便控制的伪随机算法，
从使用的角度上看近似等同于真随机。
因此我们禁用了可控性有限的 Lua 标准库中的`math.random`，
并引入状态受控的伪随机生成器`Rand`。
随着将来版本中对随机数控制机制的完善，
松饼可能会放宽对`Rand`使用时机的限制。

## 获取生成器当前状态

`local <s> = <rand>:state()`

参数 | 类型 | 描述
---- | ---- | ----
`<rand>` | userdata `Rand` | `Rand`对象

返回值 | 类型 | 描述
------ | ---- | ----
`<s>` | number | 随机数生成器当前状态

获取状态主要用于调试等特殊用途。

