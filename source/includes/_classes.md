# 松饼 userdata 接口

以下文档中，带尖括号的变量名（如`<str>`）皆为占位符，
实际使用时需替换成你自己的变量名或表达式。

## T34

`T34`代表一张不区分赤宝牌的麻将牌。

### 通过 string 构造

`local <t> = T34.new(<str>)`

参数 | 类型 | 描述
---- | ---- | ----
`<str>`| string | 表示麻将牌数值与花色的字符串

返回值 | 类型 | 描述
------ | ---- | ----
`<t>`  | userdata `T34` | 创建出的麻将牌

通过字符串创建。

第一个字符代表数值，第二个字符代表花色。

`"1m"`, `"2p"`, `"3s"`代表 1 万、2 饼、3 索；

`"1f"`, `"2f"`, `"3f"`, `"4f"`, `"1y"`, `"2y"`, `"3y"`分别代表东南西北白发中。

### 通过 ID-34 构造

`local <t> = T34.new(<id-34>)`

参数 | 类型 | 描述
---- | ---- | ----
`<id-34>`| number | ID-34

返回值 | 类型 | 描述
------ | ---- | ----
`<t>`  | userdata `T34` | 创建出的麻将牌

通过 ID-34 创建。

### 获取 ID-34

`local <id-34> = <t>:id34()`

参数 | 类型 | 描述
---- | ---- | ----
`<t>`  | userdata `T34` | 麻将牌对象

返回值 | 类型 | 描述
------ | ---- | ----
`<id-34>` | number | ID-34

### 获取花色

`local <suit> = <t>:suit()`

参数 | 类型 | 描述
---- | ---- | ----
`<t>`  | userdata `T34` | 麻将牌对象

返回值 | 类型 | 描述
------ | ---- | ----
`<suit>` | string | 花色

`"m"`, `"p"`, `"s"`, `"f"`, `"y"`分别表示万、饼、索、风牌、三元牌。

### 获取数值

`local <val> = <t>:val()`

参数 | 类型 | 描述
---- | ---- | ----
`<t>`  | userdata `T34` | 麻将牌对象

返回值 | 类型 | 描述
------ | ---- | ----
`<val>` | number | 数值

数牌返回 1～9；
风牌通过 1, 2, 3, 4 分别表示东南西北；
三元牌通过 1, 2, 3 分别表示白发中。

### 获取字符串表示

`local <str> = <t>:str34()`

参数 | 类型 | 描述
---- | ---- | ----
`<t>`  | userdata `T34` | 麻将牌对象

返回值 | 类型 | 描述
------ | ---- | ----
`<str>` | string | 对应的字符串

### 役牌判断

`local <ok> = <t>:isyakuhai(<sw>, <rw>)`

参数 | 类型 | 描述
---- | ---- | ----
`<t>`  | userdata `T34` | 麻将牌对象
`<sw>` | number | 自风
`<rw>` | number | 场风

返回值 | 类型 | 描述
------ | ---- | ----
`<ok>` | boolean | `<t>`是否为役牌

### 相等判断

`local <ok> = <t1> == <t2>`

参数 | 类型 | 描述
---- | ---- | ----
`<t1>` | userdata `T34` | 一个麻将牌对象
`<t2>` | userdata `T34` | 另一个麻将牌对象

返回值 | 类型 | 描述
------ | ---- | ----
`<ok>` | boolean | `<t1>`与`<t2>`的花色与数值是否相同

### 遍历 34 种牌

`for _, <t> in ipairs(T34.all) do <...> end`
<a name="_"></a>

## T37

`T37`是`T34`的扩展牌本，严格区分赤宝牌与普通数牌5。

`T37`是一个`T34`。
所有适用于`T34`的方法（如`suit`，`val`等）也适用于`T37`。
所有能接受`T34`的地方也都能接受`T37`。

<aside class="warning">
对<code>T37</code>使用<code>T34</code>的方法时，
只会考虑<code>T34</code>的性质。
例如，便用<code>==</code>进行相等判断时，
只考虑数值与花色，不会考虑赤牌与黑牌的区别。
</aside>

### 通过字符串构造

`local <t> = T37.new(<str>)`

参数 | 类型 | 描述
---- | ---- | ----
`<str>` | string | 表示数值与花色的字符串

返回值 | 类型 | 描述
------ | ---- | ----
`<t>`  | userdata `T37` | 创建出的`T37`对象

可通过`"0m"`, `"0p"`, `"0s"`创建赤宝牌，其余同`T34`。

### 通过 ID-34 构造

`local <t> = T37.new(<id-34>)`

参数 | 类型 | 描述
---- | ---- | ----
`<id-34>` | number | ID-34

返回值 | 类型 | 描述
------ | ---- | ----
`<t>`  | userdata `T37` | 创建出的`T37`对象

此方法不创建赤牌。

### 赤牌判断

`local <ok> = <t>:isaka5()`

参数 | 类型 | 描述
---- | ---- | ----
`<t>`  | userdata `T37` | 麻将牌对象

返回值 | 类型 | 描述
------ | ---- | ----
`<ok>` | boolean | 是否为赤宝牌

### 获取对应的字符串

`local <str> = <t>:str37()`

参数 | 类型 | 描述
---- | ---- | ----
`<t>`  | userdata `T37` | 麻将牌对象

返回值 | 类型 | 描述
------ | ---- | ----
`<str>` | string | 表示数值与花色的字符串

以`"0m"`, `"0p"`, `"0s"`表示赤 5。

## Who

### 相等判断

`local <ok> = <who1> == <who2>`

参数 | 类型 | 描述
---- | ---- | ----
`<who1>` | userdata `Who` | 一个`Who`对象
`<who2>` | userdata `Who` | 另一个`Who`对象

返回值 | 类型 | 描述
------ | ---- | ----
`<ok>` | boolean | `<who1>`与`<who2>`是否指代同一人

### 获取下家

`local <who2> = <who1>:right()`

参数 | 类型 | 描述
---- | ---- | ----
`<who1>` | userdata `Who` | `Who`对象

返回值 | 类型 | 描述
------ | ---- | ----
`<who2>` | userdata `Who` | `<who1>`的下家

### 获取对家

`local <who2> = <who1>:cross()`

参数 | 类型 | 描述
---- | ---- | ----
`<who1>` | userdata `Who` | `Who`对象

返回值 | 类型 | 描述
------ | ---- | ----
`<who2>` | userdata `Who` | `<who1>`的对家

### 获取上家

`local <who2> = <who1>:left()`

参数 | 类型 | 描述
---- | ---- | ----
`<who1>` | userdata `Who` | `Who`对象

返回值 | 类型 | 描述
------ | ---- | ----
`<who2>` | userdata `Who` | `<who1>`的上家

